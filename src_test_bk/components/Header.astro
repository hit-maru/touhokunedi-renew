---
// src/components/Header.astro
---
<header class="fixed top-0 left-0 w-full bg-white z-[60] border-b border-gray-100">
  <div class="container mx-auto px-6 h-20 flex justify-between items-center">
    
    {/* ロゴエリア：マーク + 社名 */}
    <div class="flex flex-col justify-center">
      <a href={`${import.meta.env.BASE_URL}/`} class="flex items-center gap-3 group">
        <img src={`${import.meta.env.BASE_URL}/images/T-nedzi-mark.png`} alt="東北ネヂ製造 マーク" class="h-8 md:h-10 w-auto" />
        <div class="flex items-center whitespace-nowrap">
          <span class="text-gray-900 font-bold leading-none" style="font-family: 'Shin Go Bold', sans-serif; font-size: 1.5rem;">東北ネヂ製造</span>
          <span class="text-gray-900 font-bold leading-none" style="font-family: 'Shin Go Bold', sans-serif; font-size: 1.05rem; margin-left: 2px; transform: scale(0.7); transform-origin: left center;">株式会社</span>
        </div>
      </a>
      <div class="hidden md:block text-[9px] leading-[1.4] text-gray-500 font-medium mt-1 whitespace-nowrap">
        日本工業規格表示認証工場 ISO9001/14001/45001認証取得<br /> 熱間鍛造ボルト・ねじメーカー
      </div>
    </div>

    {/* PC用ナビゲーション：全項目復活版 */}
    <div class="hidden md:flex items-center gap-8">
      <nav class="flex gap-8 items-center text-gray-600 font-sans">
        <a href={`${import.meta.env.BASE_URL}/company`} class="text-sm font-bold hover:text-[#008B9B] tracking-wider transition-colors">企業情報</a>
        <a href={`${import.meta.env.BASE_URL}/manufacture`} class="text-sm font-bold hover:text-[#008B9B] tracking-wider transition-colors">製造事業</a>
        <a href={`${import.meta.env.BASE_URL}/sales`} class="text-sm font-bold hover:text-[#008B9B] tracking-wider transition-colors">販売事業</a>
        <a href={`${import.meta.env.BASE_URL}/recruit`} class="text-sm font-bold hover:text-[#008B9B] tracking-wider transition-colors">採用情報</a>
        <a href={`${import.meta.env.BASE_URL}/news`} class="text-sm font-bold hover:text-[#008B9B] tracking-wider transition-colors">お知らせ</a>
      </nav>
      
      {/* JP/EN 切り替え */}
      <a href={`${import.meta.env.BASE_URL}/en`} class="text-[#E64A19] border-l border-gray-300 pl-6 flex items-center gap-1 hover:opacity-70 transition-opacity text-sm font-sans">
        <span class="text-gray-900 font-bold">JP</span>
        <span class="text-xs font-normal text-gray-400">/ EN</span>
      </a>
      
      {/* お問合せボタン */}
      <a href={`${import.meta.env.BASE_URL}/contact`} class="px-4 py-1.5 border border-gray-900 text-sm font-bold hover:bg-gray-900 hover:text-white transition-all uppercase font-serif tracking-widest">
        お問合せ
      </a>
    </div>

    {/* モバイル用メニューボタン */}
    <button id="menu-btn" class="md:hidden flex flex-col justify-center items-center w-8 h-8 relative z-[70] focus:outline-none" aria-label="Menu">
      <span id="line1" class="w-6 h-0.5 bg-gray-900 transition-all duration-300 origin-center"></span>
      <span id="line2" class="w-6 h-0.5 bg-gray-900 my-1.5 transition-all duration-300"></span>
      <span id="line3" class="w-6 h-0.5 bg-gray-900 transition-all duration-300 origin-center"></span>
    </button>
  </div>

  {/* モバイルメニュー（全項目） */}
  <div id="mobile-menu" class="fixed inset-0 bg-white z-[65] transform translate-x-full transition-transform duration-500 ease-in-out md:hidden">
    <div class="flex flex-col h-full pt-32 px-10">
      <ul class="flex flex-col gap-6">
        <li><a href={`${import.meta.env.BASE_URL}/company`} class="mobile-link text-lg font-bold">企業情報</a></li>
        <li><a href={`${import.meta.env.BASE_URL}/manufacture`} class="mobile-link text-lg font-bold">製造事業</a></li>
        <li><a href={`${import.meta.env.BASE_URL}/sales`} class="mobile-link text-lg font-bold">販売事業</a></li>
        <li><a href={`${import.meta.env.BASE_URL}/recruit`} class="mobile-link text-lg font-bold">採用情報</a></li>
        <li><a href={`${import.meta.env.BASE_URL}/news`} class="mobile-link text-lg font-bold">お知らせ</a></li>
      </ul>
      <div class="mt-auto pb-12">
        <a href={`${import.meta.env.BASE_URL}/contact`} class="mobile-link block w-full bg-gray-900 text-white text-center py-4 font-bold rounded-sm uppercase font-serif tracking-widest">
          Contact
        </a>
      </div>
    </div>
  </div>
  <div id="menu-backdrop" class="fixed inset-0 bg-black/20 opacity-0 pointer-events-none transition-opacity duration-500 z-[64]"></div>
</header>

<script>
  // メニュー開閉用JS
  const menuBtn = document.getElementById('menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const backdrop = document.getElementById('menu-backdrop');
  const line1 = document.getElementById('line1');
  const line2 = document.getElementById('line2');
  const line3 = document.getElementById('line3');

  if (menuBtn && mobileMenu && backdrop && line1 && line2 && line3) {
    const toggleMenu = () => {
      const isOpen = mobileMenu.classList.contains('translate-x-0');
      if (isOpen) {
        mobileMenu.classList.replace('translate-x-0', 'translate-x-full');
        backdrop.classList.replace('opacity-100', 'opacity-0');
        backdrop.classList.add('pointer-events-none');
        document.body.style.overflow = '';
        line1.classList.remove('rotate-45', 'translate-y-2');
        line2.classList.remove('opacity-0');
        line3.classList.remove('-rotate-45', '-translate-y-2');
      } else {
        mobileMenu.classList.replace('translate-x-full', 'translate-x-0');
        backdrop.classList.replace('opacity-0', 'opacity-100');
        backdrop.classList.remove('pointer-events-none');
        document.body.style.overflow = 'hidden';
        line1.classList.add('rotate-45', 'translate-y-2');
        line2.classList.add('opacity-0');
        line3.classList.add('-rotate-45', '-translate-y-2');
      }
    };
    menuBtn.addEventListener('click', toggleMenu);
    backdrop.addEventListener('click', toggleMenu);
  }
</script>