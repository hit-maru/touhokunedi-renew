---
// HeaderEn.astro
---
<header class="fixed top-0 left-0 w-full bg-white/95 backdrop-blur z-50 border-b border-gray-100">
  <div class="container mx-auto px-6 h-20 flex justify-between items-center">
    <a href="/en/" class="flex flex-col group relative z-[70]">
      <span class="font-serif text-[32px] font-normal text-gray-900 tracking-tight leading-none group-hover:text-[#008B9B] transition-colors">
        nedzi
      </span>
      <span class="text-[10px] font-bold text-gray-500 tracking-[0.15em] uppercase mt-1">
        Tohoku Bolt Mfg.
      </span>
    </a>

    <nav class="hidden lg:flex gap-8 text-[11px] font-bold text-gray-600 items-center tracking-widest">
      <a href="/en/company" class="hover:text-[#008B9B] transition-colors">COMPANY</a>
      <a href="/en/product" class="hover:text-[#008B9B] transition-colors">PRODUCTS</a>
      <a href="/en/manufacture" class="hover:text-[#008B9B] transition-colors">MFG & QUALITY</a>
      <a href="/en/company#profile" class="hover:text-[#008B9B] transition-colors">PROFILE</a>
      <a href="/en/#locations" class="hover:text-[#008B9B] transition-colors">LOCATIONS</a>

      <div class="flex items-center gap-2 ml-4 border-l border-gray-200 pl-6">
        <a href="/" class="text-gray-400 hover:text-gray-900">JP</a>
        <span class="text-gray-200">/</span>
        <span class="text-gray-900 underline underline-offset-4">EN</span>
      </div>
    </nav>

    <button id="mobile-menu-btn" class="lg:hidden flex flex-col gap-1.5 p-2 relative z-[70]" aria-label="Toggle Menu">
      <div id="line1" class="w-6 h-0.5 bg-gray-900 transition-all"></div>
      <div id="line2" class="w-6 h-0.5 bg-gray-900 transition-all"></div>
      <div id="line3" class="w-6 h-0.5 bg-gray-900 transition-all"></div>
    </button>
  </div>
</header>

<div id="mobile-menu" class="fixed inset-0 bg-white z-[60] transform translate-x-full transition-transform duration-300 lg:hidden pt-28 px-6 overflow-y-auto">
  <nav class="flex flex-col gap-6 text-lg font-bold text-gray-800 text-center uppercase tracking-widest">
    <a href="/en/company" class="mobile-link py-2 border-b border-gray-100">COMPANY</a>
    <a href="/en/product" class="mobile-link py-2 border-b border-gray-100">PRODUCTS</a>
    <a href="/en/manufacture" class="mobile-link py-2 border-b border-gray-100">MFG & QUALITY</a>
    <a href="/en/company#profile" class="mobile-link py-2 border-b border-gray-100">PROFILE</a>
    <a href="/en/#locations" class="mobile-link py-2 border-b border-gray-100">LOCATIONS</a>
    <a href="/" class="text-[#E64A19] pt-4 text-sm font-normal">Switch to Japanese Site</a>
  </nav>
</div>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const mobileLinks = document.querySelectorAll('.mobile-link');
  const [l1, l2, l3] = [document.getElementById('line1'), document.getElementById('line2'), document.getElementById('line3')];

  function toggleMenu() {
    if (!mobileMenu) return;
    const isOpen = mobileMenu.classList.toggle('translate-x-full');
    
    // スクロールロックの切り替え
    document.body.style.overflow = !isOpen ? 'hidden' : '';

    // アイコンのアニメーション (✕印)
    l1?.classList.toggle('rotate-45');
    l1?.classList.toggle('translate-y-2');
    l2?.classList.toggle('opacity-0');
    l3?.classList.toggle('-rotate-45');
    l3?.classList.toggle('-translate-y-2');
  }

  menuBtn?.addEventListener('click', toggleMenu);
  mobileLinks.forEach(link => link.addEventListener('click', () => {
    mobileMenu?.classList.add('translate-x-full');
    document.body.style.overflow = '';
  }));
</script>