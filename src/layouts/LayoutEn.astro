---
/* src/layouts/LayoutEn.astro */

// import HeaderEn from '../components/en/HeaderEn.astro'; // 使ってないので一旦コメントアウト（使うなら下の<header>自体をHeaderEnに置き換える）
import FooterEn from '../components/en/FooterEn.astro';

// フォントデータ本体を読み込む（これが重要！）
import '@fontsource/noto-sans-jp/400.css';
import '@fontsource/noto-sans-jp/700.css';
import '@fontsource/cormorant-garamond/700.css';
import '@fontsource/eb-garamond/400.css';
import '@fontsource/eb-garamond/700.css';

import '../styles/global.css';
const { title } = Astro.props;
---

<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title} | Tohoku Bolt Mfg. Co., Ltd.</title>
    <style>
      html {
        scroll-padding-top: 5rem; /* 80px */
      }
    </style>
  </head>

  <body class="bg-white text-gray-800 font-sans antialiased flex flex-col min-h-screen">

    {/* 共通ヘッダー：ラベルを統一 */}
    <header class="fixed top-0 left-0 w-full bg-white/95 backdrop-blur z-50 border-b border-gray-100">
      <div class="container mx-auto px-6 h-20 flex justify-between items-center">
        <a href="/en/" class="flex flex-col group">
          <span class="font-serif text-2xl text-gray-900 tracking-tight leading-none group-hover:text-[#008B9B] transition-colors">
            nedzi
          </span>
          <span class="text-[10px] text-gray-500 tracking-widest uppercase">Tohoku Bolt Mfg.</span>
        </a>

        {/* Desktop Nav */}
        <nav class="hidden lg:flex gap-8 text-[11px] font-bold text-gray-600 items-center tracking-widest">
          <a href="/en/company" class="hover:text-[#008B9B] transition-colors">COMPANY</a>
          <a href="/en/product" class="hover:text-[#008B9B] transition-colors">PRODUCTS</a>
          <a href="/en/manufacture" class="hover:text-[#008B9B] transition-colors">MFG & QUALITY</a>
          <a href="/en/company#profile" class="hover:text-[#008B9B] transition-colors">PROFILE</a>
          <a href="/en/#locations" class="hover:text-[#008B9B] transition-colors">LOCATIONS</a>

          {/* Language Switch */}
          <div class="flex items-center gap-2 ml-4 border-l border-gray-200 pl-6">
            <a href="/" class="text-gray-400 hover:text-gray-900 transition-colors uppercase text-[10px]">JP</a>
            <span class="text-gray-300">/</span>
            <span class="text-gray-900 uppercase text-[10px]">EN</span>
          </div>
        </nav>

        {/* Mobile Menu Button */}
        <button id="mobile-menu-btn" class="lg:hidden p-2" aria-label="Open Menu">
          <div class="w-6 h-0.5 bg-gray-800 mb-1.5"></div>
          <div class="w-6 h-0.5 bg-gray-800 mb-1.5"></div>
          <div class="w-6 h-0.5 bg-gray-800"></div>
        </button>
      </div>
    </header>

    {/* ✅ Mobile Nav Overlay：header の外に出す（これが決定打） */}
    <div
      id="mobile-menu"
      class="fixed inset-0 bg-white z-[60] transform translate-x-full transition-transform duration-300 lg:hidden pt-24 px-6 overflow-y-auto"
    >
      <nav class="flex flex-col gap-6 text-lg font-bold text-gray-800 text-center uppercase tracking-widest">
        <a href="/en/company" class="mobile-link py-2 border-b border-gray-100">COMPANY</a>
        <a href="/en/product" class="mobile-link py-2 border-b border-gray-100">PRODUCTS</a>
        <a href="/en/manufacture" class="mobile-link py-2 border-b border-gray-100">MFG & QUALITY</a>
        <a href="/en/company#profile" class="mobile-link py-2 border-b border-gray-100">PROFILE</a>
        <a href="/en/#locations" class="mobile-link py-2 border-b border-gray-100">LOCATIONS</a>
        <a href="/" class="text-[#E64A19] pt-4 text-sm font-normal">Switch to Japanese Site</a>
      </nav>
    </div>

    <main class="flex-grow">
      <slot />
    </main>

    <FooterEn />

    {/* Back to Top Button */}
    <button
      id="back-to-top-en"
      class="fixed bottom-8 right-8 z-50 bg-[#008B9B] text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center opacity-0 invisible transition-all duration-300 hover:bg-[#006064]"
      aria-label="Back to top"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
      </svg>
    </button>

    <script>
      const btn = document.getElementById('back-to-top-en');
      if (btn) {
        window.addEventListener('scroll', () => {
          if (window.scrollY > 300) {
            btn.classList.remove('opacity-0', 'invisible');
            btn.classList.add('opacity-100', 'visible');
          } else {
            btn.classList.remove('opacity-100', 'visible');
            btn.classList.add('opacity-0', 'invisible');
          }
        });
        btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
      }

      const menuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      const mobileLinks = document.querySelectorAll('.mobile-link');

      if (menuBtn && mobileMenu) {
        menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('translate-x-full'));
        mobileLinks.forEach(link => link.addEventListener('click', () => mobileMenu.classList.add('translate-x-full')));
      }
    </script>
  </body>
</html>

<style is:global>
  .font-serif { font-family: 'Cormorant Garamond', serif; }
  .font-sans { font-family: 'Noto Sans JP', sans-serif; }
  .font-gara { font-family: 'EB Garamond', serif; }
</style>
